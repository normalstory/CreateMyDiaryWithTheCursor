<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=375px, initial-scale=1.0">
<title>ë°”ë¥¸ìƒíšŒ</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
<style>:where([class^="ri-"])::before { content: "\f3c2"; }</style>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
<script>
tailwind.config = {
theme: {
extend: {
colors: {
primary: '#4CAF50',
secondary: '#2C3E50',
beige: '#F5F0E1',
brown: '#D7A86E',
yellow: '#F1C40F'
},
borderRadius: {
'none': '0px',
'sm': '4px',
DEFAULT: '8px',
'md': '12px',
'lg': '16px',
'xl': '20px',
'2xl': '24px',
'3xl': '32px',
'full': '9999px',
'button': '8px'
}
}
}
}
</script>
</head>
<body class="w-[375px] min-h-[762px] mx-auto bg-white">
<nav class="fixed top-0 w-[375px] z-50 bg-white/95 backdrop-blur-sm border-b">
<div class="flex items-center justify-between px-4 py-3">
<div class="font-bold text-xl text-secondary">ë°”ë¥¸ìƒíšŒ</div>
<button class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary/90 !rounded-button">
íŒŒíŠ¸ë„ˆ ë¬¸ì˜
</button>
</div>
</nav>
<main class="pt-[60px] pb-[80px]">
<section class="relative h-[480px] overflow-hidden">
<div class="swiper-container h-full" id="mainSwiper">
<div class="swiper-wrapper">
<div class="swiper-slide">
<img src="https://public.readdy.ai/ai/img_res/a4c3402a92879bcc88599e1e71996b43.jpg" class="w-full h-full object-cover" alt="Store Image">
<div class="absolute inset-0 bg-black/30 flex flex-col justify-center px-6">
<p class="text-white/80 mb-2 text-sm font-medium">ë°”ë¥¸ìƒíšŒ ì†Œê°œ</p>
<h1 class="text-3xl font-bold text-white mb-4">ì–´ë¥¸ë“¤ì—ê²ŒëŠ” í–¥ìˆ˜ë¥¼,<br>ì•„ì´ë“¤ì—ê²ŒëŠ” ì¶”ì–µì„</h1>
<p class="text-white/90 mb-2">ìµìˆ™í•œ ë”°ëœ»í•¨ê³¼<br>ìƒˆë¡œìš´ ì¦ê±°ì›€ì´ í•¨ê»˜í•˜ëŠ” ê³µê°„</p>
<p class="text-white/80 text-sm mb-8">í• ì¸ì´ í•„ìš” ì—†ëŠ” ë°”ë¥¸ ê°€ê²©ìœ¼ë¡œ<br>ì •ì§í•˜ê²Œ ìš´ì˜í•˜ëŠ” ë¡œì»¬ ë§ˆì¼“</p>
</div>
</div>
<div class="swiper-slide">
<img src="https://public.readdy.ai/ai/img_res/7fc2af2d95112a2957f7666fa875f953.jpg" class="w-full h-full object-cover" alt="Communication Image">
<div class="absolute inset-0 bg-black/30 flex flex-col justify-center px-6">
<p class="text-white/80 mb-2 text-sm font-medium">ë°”ë¥¸ ì†Œí†µ</p>
<h1 class="text-3xl font-bold text-white mb-4">ì§€ì—­ì‚¬íšŒì™€ í•¨ê»˜<br>ì„±ì¥í•˜ëŠ” íŒŒíŠ¸ë„ˆ</h1>
<p class="text-white/90 mb-2">ì´ì›ƒê³¼ í•¨ê»˜ ë§Œë“œëŠ”<br>ë”°ëœ»í•œ ì»¤ë®¤ë‹ˆí‹°</p>
<p class="text-white/80 text-sm mb-8">ì§€ì—­ ì£¼ë¯¼ë“¤ì˜ ì¼ìƒ ì†<br>ì†Œí†µì˜ ê³µê°„ì´ ë˜ê² ìŠµë‹ˆë‹¤</p>
</div>
</div>
<div class="swiper-slide">
<img src="https://public.readdy.ai/ai/img_res/88761fb771b809bf72b8fce2d58499ae.jpg" class="w-full h-full object-cover" alt="Partnership Image">
<div class="absolute inset-0 bg-black/30 flex flex-col justify-center px-6">
<p class="text-white/80 mb-2 text-sm font-medium">ë°”ë¥¸ íŒŒíŠ¸ë„ˆì‹­</p>
<h1 class="text-3xl font-bold text-white mb-4">ì„±ê³µì ì¸ ì°½ì—…,<br>ë“ ë“ í•œ ë™ë°˜ì</h1>
<p class="text-white/90 mb-2">ì²´ê³„ì ì¸ ìš´ì˜ ì‹œìŠ¤í…œê³¼<br>ì•ˆì •ì ì¸ ìˆ˜ìµ ì°½ì¶œ</p>
<p class="text-white/80 text-sm mb-8">ë³¸ì‚¬ì˜ ì „í­ì ì¸ ì§€ì›ìœ¼ë¡œ<br>í•¨ê»˜ ì„±ì¥í•˜ëŠ” íŒŒíŠ¸ë„ˆì‹­</p>
</div>
</div>
</div>
<div class="swiper-pagination absolute bottom-20"></div>
</div>
<button class="w-[calc(100%-48px)] absolute bottom-8 left-1/2 -translate-x-1/2 py-4 bg-primary text-white font-medium !rounded-button">
íŒŒíŠ¸ë„ˆ ìƒë‹´ ì‹ ì²­í•˜ê¸°
</button>
</section>
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
// Firebase ì„¤ì •
const firebaseConfig = {
    apiKey: "AIzaSyCbu_1gbtSIVUvmmw5RyLYvjaYOG7RdCWw",
    authDomain: "ppap-ea44a.firebaseapp.com",
    projectId: "ppap-ea44a",
    storageBucket: "ppap-ea44a.firebasestorage.app",
    messagingSenderId: "811949338329",
    appId: "1:811949338329:web:cda8d43a7aeb825ce258c8",
    measurementId: "G-6QGZT6Y1TE"
};

// Firebase ì´ˆê¸°í™”
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();

// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
const utils = {
    // ì´ë¯¸ì§€ ìµœì í™” ë° ì—…ë¡œë“œ
    async optimizeAndUploadImage(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = async () => {
                    const canvas = document.createElement('canvas');
                    const [MAX_WIDTH, MAX_HEIGHT] = [1200, 1200];
                    let [width, height] = [img.width, img.height];

                    if (width > height && width > MAX_WIDTH) {
                        height *= MAX_WIDTH / width;
                        width = MAX_WIDTH;
                    } else if (height > MAX_HEIGHT) {
                        width *= MAX_HEIGHT / height;
                        height = MAX_HEIGHT;
                    }

                    Object.assign(canvas, { width, height });
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);

                    canvas.toBlob(async (blob) => {
                        try {
                            const fileRef = storage.ref().child(`franchise_inquiries/${Date.now()}_${file.name}`);
                            await fileRef.put(blob);
                            const url = await fileRef.getDownloadURL();
                            resolve(url);
                        } catch (error) {
                            reject(error);
                        }
                    }, 'image/jpeg', 0.8);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        });
    },

    // í™œë™ ë¡œê·¸ ê¸°ë¡
    async logActivity(action, data) {
        try {
            await db.collection('activity_logs').add({
                action,
                data,
                timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                userAgent: navigator.userAgent,
                path: window.location.pathname
            });
        } catch (error) {
            console.error('ë¡œê·¸ ê¸°ë¡ ì‹¤íŒ¨:', error);
        }
    }
};

// íŒŒíŠ¸ë„ˆ ë¬¸ì˜ ê´€ë ¨ ê¸°ëŠ¥
const partnerInquiry = {
    // ë¬¸ì˜ ì œì¶œ
    async submit(formData) {
        try {
            const docRef = await db.collection('franchise_inquiries').add({
                ...formData,
                status: 'pending',
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });

            await utils.logActivity('partner_inquiry_submit', {
                inquiryId: docRef.id,
                partnerType: formData.partnerType
            });

            return docRef.id;
        } catch (error) {
            console.error('ë¬¸ì˜ ì œì¶œ ì‹¤íŒ¨:', error);
            throw error;
        }
    },

    // ë¬¸ì˜ ë‹¤ì´ì–¼ë¡œê·¸ HTML
    getDialogHTML() {
        return `
            <div class="bg-white w-[320px] rounded-lg p-6">
                <h3 class="text-lg font-medium mb-4">íŒŒíŠ¸ë„ˆ ìƒë‹´ ì‹ ì²­</h3>
                <form id="partnerInquiryForm" class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">íŒŒíŠ¸ë„ˆ ìœ í˜•</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center p-3 border rounded cursor-pointer hover:border-primary">
                                <input type="radio" name="partner-type" value="ì „ì†" class="mr-2" required>
                                <div>
                                    <div class="font-medium">ì „ì† íŒŒíŠ¸ë„ˆ</div>
                                    <div class="text-xs text-gray-500">ì‹ ê·œ ê°œì„¤ A to Z ì§€ì›</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded cursor-pointer hover:border-primary">
                                <input type="radio" name="partner-type" value="ìš´ì˜ì§€ì›" class="mr-2">
                                <div>
                                    <div class="font-medium">ìš´ì˜ ì§€ì›</div>
                                    <div class="text-xs text-gray-500">ìƒí’ˆ ë‚©í’ˆ ë° ë§¤ì¥ ê´€ë¦¬</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    <input type="text" placeholder="ì´ë¦„" required class="w-full px-4 py-2 border rounded">
                    <input type="tel" placeholder="ì—°ë½ì²˜" required class="w-full px-4 py-2 border rounded">
                    <input type="text" placeholder="í¬ë§ì§€ì—­" required class="w-full px-4 py-2 border rounded">
                    <button type="submit" class="w-full py-3 bg-primary hover:bg-primary/90 text-white !rounded-button">ì‹ ì²­í•˜ê¸°</button>
                </form>
                <button class="w-full py-2 mt-2 text-gray-500" onclick="this.closest('.fixed').remove()">ë‹«ê¸°</button>
            </div>
        `;
    },

    // ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
    showDialog() {
        const dialog = document.createElement('div');
        dialog.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
        dialog.innerHTML = this.getDialogHTML();
        document.body.appendChild(dialog);

        // í¼ ì œì¶œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        const form = dialog.querySelector('#partnerInquiryForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitButton = form.querySelector('button[type="submit"]');
            submitButton.disabled = true;

            try {
                const formData = {
                    name: form.querySelector('input[placeholder="ì´ë¦„"]').value,
                    phone: form.querySelector('input[placeholder="ì—°ë½ì²˜"]').value,
                    location: form.querySelector('input[placeholder="í¬ë§ì§€ì—­"]').value,
                    partnerType: form.querySelector('input[name="partner-type"]:checked').value
                };

                await this.submit(formData);
                alert('ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
                dialog.remove();
            } catch (error) {
                alert('ë¬¸ì˜ ì ‘ìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                submitButton.disabled = false;
            }
        });
    }
};

// ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ í•¨ìˆ˜ ì„¤ì •
window.showContactDialog = () => partnerInquiry.showDialog();

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
document.addEventListener('DOMContentLoaded', () => {
    // ìŠ¤ë¬´ìŠ¤ ìŠ¤í¬ë¡¤
    document.querySelectorAll('.smooth-scroll').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = anchor.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // ë¬¸ì˜ ë²„íŠ¼ ì´ë²¤íŠ¸ (footer ë²„íŠ¼ ì œì™¸)
    document.querySelectorAll('button:not([onclick])').forEach(button => {
        const text = button.textContent.trim().toLowerCase();
        if (text.includes('íŒŒíŠ¸ë„ˆ') || text.includes('ìƒë‹´')) {
            button.addEventListener('click', () => partnerInquiry.showDialog());
        }
    });
});

// Swiper ì´ˆê¸°í™”
new Swiper('#mainSwiper', {
    loop: true,
    pagination: {
        el: '.swiper-pagination',
        clickable: true
    },
    autoplay: {
        delay: 5000,
        disableOnInteraction: false
    }
});
</script>
<section class="px-4 py-8 bg-white">
<h2 class="text-xl font-bold mb-2">ë°”ë¥¸ìƒíšŒì˜ ì•½ì†</h2>
<p class="text-sm text-gray-600 mb-6">ì˜¬ë°”ë¥¸ ìœ í†µ, ë°”ë¥¸ ê°€ê²©, ì •ì§í•œ ìš´ì˜</p>
<div class="grid grid-cols-3 gap-4">
<div class="text-center">
<div class="w-16 h-16 mx-auto mb-2 rounded-full bg-beige flex items-center justify-center">
<i class="ri-store-3-line text-xl text-brown"></i>
</div>
<p class="text-sm font-medium">ìµìˆ™í•œ ê³µê°„</p>
<p class="text-xs text-gray-500 mt-1">ì •ê²¨ìš´ ë™ë„¤ê°€ê²Œ</p>
</div>
<div class="text-center">
<div class="w-16 h-16 mx-auto mb-2 rounded-full bg-beige flex items-center justify-center">
<i class="ri-hand-heart-line text-xl text-brown"></i>
</div>
<p class="text-sm font-medium">ë¡œì»¬ ìƒìƒ</p>
<p class="text-xs text-gray-500 mt-1">ì§€ì—­ê³¼ í•¨ê»˜ ì„±ì¥</p>
</div>
<div class="text-center">
<div class="w-16 h-16 mx-auto mb-2 rounded-full bg-beige flex items-center justify-center">
<i class="ri-group-line text-xl text-brown"></i>
</div>
<p class="text-sm font-medium">ì»¤ë®¤ë‹ˆí‹°</p>
<p class="text-xs text-gray-500 mt-1">ì´ì›ƒê³¼ì˜ ì†Œí†µ</p>
</div>
</div>
</section>
<section id="benefits" class="px-4 py-8 bg-gray-50">
<h2 class="text-xl font-bold mb-2">íŒŒíŠ¸ë„ˆ í˜œíƒ</h2>
<p class="text-sm text-gray-600 mb-6">ì‰½ê³  ì•ˆì •ì ì¸ ìš´ì˜ì„ ìœ„í•œ ë³¸ì‚¬ì˜ ë“ ë“ í•œ ì§€ì›</p>
<div class="space-y-4">
<div class="p-4 bg-white rounded-lg shadow-sm">
<div class="flex items-center gap-3">
<div class="w-10 h-10 flex items-center justify-center bg-beige rounded-full">
<i class="ri-money-dollar-circle-line text-lg text-yellow"></i>
</div>
<div>
<h3 class="font-medium">ì´ˆê¸° íˆ¬ì ë¶€ë‹´ ìµœì†Œí™”</h3>
<p class="text-sm text-gray-600">í•©ë¦¬ì ì¸ ì°½ì—…ë¹„ìš©ê³¼ ì•ˆì •ì ì¸ ìˆ˜ìµêµ¬ì¡°</p>
</div>
</div>
</div>
<div class="p-4 bg-white rounded-lg shadow-sm">
<div class="flex items-center gap-3">
<div class="w-10 h-10 flex items-center justify-center bg-beige rounded-full">
<i class="ri-customer-service-2-line text-lg text-yellow"></i>
</div>
<div>
<h3 class="font-medium">ìŠ¤ë§ˆíŠ¸í•œ ìš´ì˜ ì‹œìŠ¤í…œ</h3>
<p class="text-sm text-gray-600">ë¬´ì¸ ìš´ì˜ìœ¼ë¡œ íš¨ìœ¨ì ì¸ ë§¤ì¥ ê´€ë¦¬</p>
</div>
</div>
</div>
<div class="p-4 bg-white rounded-lg shadow-sm">
<div class="flex items-center gap-3">
<div class="w-10 h-10 flex items-center justify-center bg-beige rounded-full">
<i class="ri-store-2-line text-lg text-yellow"></i>
</div>
<div>
<h3 class="font-medium">ë¡œì»¬ ë¸Œëœë“œ íŒŒì›Œ</h3>
<p class="text-sm text-gray-600">ì§€ì—­ ë°€ì°©í˜• ë§ˆì¼€íŒ… ë° ìƒí’ˆ êµ¬ì„± ì§€ì›</p>
</div>
</div>
</div>
<div class="p-4 bg-white rounded-lg shadow-sm">
<div class="flex items-center gap-3">
<div class="w-10 h-10 flex items-center justify-center bg-beige rounded-full">
<i class="ri-ice-cream-line text-lg text-yellow"></i>
</div>
<div>
<h3 class="font-medium">ê¸°ì¡´ ë§¤ì¥ ê´€ë¦¬ ì„œë¹„ìŠ¤</h3>
<p class="text-sm text-gray-600">ìš´ì˜ ì¤‘ì¸ ì•„ì´ìŠ¤í¬ë¦¼ ë§¤ì¥ ë‚©í’ˆ ë° ìœ„íƒ ê´€ë¦¬</p>
</div>
</div>
</div>
</div>
</section>
<section id="guide" class="px-4 py-8 bg-white">
<h2 class="text-xl font-bold mb-6">ë°”ë¥¸ íŒŒíŠ¸ë„ˆ ìš´ì˜ ê°€ì´ë“œ</h2>
<p class="text-sm text-gray-600 mb-8">ë” ì‰½ê³  íš¨ìœ¨ì ì¸ ìš´ì˜ì„ ìœ„í•œ ë°”ë¥¸ìƒíšŒì˜ ì²´ê³„ì ì¸ ì§€ì› ì‹œìŠ¤í…œì„ ì†Œê°œí•©ë‹ˆë‹¤.</p>
<div class="grid grid-cols-2 gap-4 mb-8">
<div class="relative overflow-hidden rounded-lg">
<img src="https://public.readdy.ai/ai/img_res/4083c283aec6a027663145cdf7316670.jpg" class="w-full h-40 object-cover" alt="Store Layout">
<div class="absolute inset-0 bg-black/20 flex items-center justify-center">
<div class="text-center">
<div class="text-3xl mb-2">ğŸª</div>
<h3 class="text-white font-medium">ë§¤ì¥ ì»¨ì„¤íŒ…</h3>
</div>
</div>
</div>
<div class="relative overflow-hidden rounded-lg">
<img src="https://public.readdy.ai/ai/img_res/a51e3453c0c8178e98fd1a46e098fde5.jpg" class="w-full h-40 object-cover" alt="Smart System">
<div class="absolute inset-0 bg-black/20 flex items-center justify-center">
<div class="text-center">
<div class="text-3xl mb-2">ğŸ“Š</div>
<h3 class="text-white font-medium">ìŠ¤ë§ˆíŠ¸ ìš´ì˜</h3>
</div>
</div>
</div>
</div>
<div class="space-y-6">
<div class="bg-gray-50 p-4 rounded-lg flex items-start gap-4">
<div class="text-2xl">ğŸ’¡</div>
<div>
<h4 class="font-medium mb-2">ì „ë¬¸ ì»¨ì„¤íŒ…</h4>
<p class="text-sm text-gray-600">ì…ì§€ ë¶„ì„ë¶€í„° ì¸í…Œë¦¬ì–´, ìƒí’ˆ êµ¬ì„±ê¹Œì§€ ì „ë¬¸ê°€ì˜ ë§ì¶¤ ì»¨ì„¤íŒ…ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
</div>
</div>
<div class="bg-gray-50 p-4 rounded-lg flex items-start gap-4">
<div class="text-2xl">ğŸ¤–</div>
<div>
<h4 class="font-medium mb-2">AI ìš´ì˜ ì‹œìŠ¤í…œ</h4>
<p class="text-sm text-gray-600">ì‹¤ì‹œê°„ ë°ì´í„° ë¶„ì„ìœ¼ë¡œ ì¬ê³ ì™€ ë§¤ì¶œì„ ìµœì í™”í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
</div>
</div>
<div class="bg-gray-50 p-4 rounded-lg flex items-start gap-4">
<div class="text-2xl">ğŸ¤</div>
<div>
<h4 class="font-medium mb-2">ë“ ë“ í•œ íŒŒíŠ¸ë„ˆì‹­</h4>
<p class="text-sm text-gray-600">ì •ê¸°ì ì¸ ë°©ë¬¸ ê´€ë¦¬ì™€ ê¸´ê¸‰ ì§€ì›ìœ¼ë¡œ ì•ˆì •ì ì¸ ìš´ì˜ì„ ë„ì™€ë“œë¦½ë‹ˆë‹¤.</p>
</div>
</div>
</div>
<div class="mt-8">
<button class="w-full py-4 bg-primary text-white font-medium !rounded-button">
íŒŒíŠ¸ë„ˆ ì‹ ì²­í•˜ê¸°
</button>
</div>
</section>
<div class="px-4 py-6 bg-gray-50 text-center text-sm text-gray-500">
    <p class="font-medium mb-2">ë°”ë¥¸ìƒíšŒ ìƒí™œì—°êµ¬ì†Œ</p>
    <p class="mb-1">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 327-43-01269</p>
    <p class="mb-1">ëŒ€ì „ê´‘ì—­ì‹œ ë™êµ¬ ëŒ€ì „ì²œë™ë¡œ 528,ë¶€ë¼ë‹¤ì˜¤í”¼ìŠ¤í…” 1110í˜¸</p>
    <p class="mb-4">ì´ë©”ì¼: dev.chanwoo@gmail.com</p>
    <p class="text-xs">Â© 2025 ë°”ë¥¸ìƒíšŒ ìƒí™œì—°êµ¬ì†Œ. All rights reserved.</p>
</div>
</main>
<footer class="fixed bottom-0 w-[375px] bg-white border-t">
<div class="grid grid-cols-5 gap-0">
<a href="#mainSwiper" class="flex flex-col items-center justify-center py-2 smooth-scroll">
<i class="ri-home-5-line text-lg"></i>
<span class="text-xs mt-1">ë©”ì¸</span>
</a>
<a href="#benefits" class="flex flex-col items-center justify-center py-2 smooth-scroll">
<i class="ri-gift-line text-lg"></i>
<span class="text-xs mt-1">í˜œíƒì•ˆë‚´</span>
</a>
<a href="#guide" class="flex flex-col items-center justify-center py-2 smooth-scroll">
<i class="ri-book-open-line text-lg"></i>
<span class="text-xs mt-1">ìš´ì˜ê°€ì´ë“œ</span>
</a>
<button class="flex flex-col items-center justify-center py-2 w-full" onclick="showContactDialog()">
<i class="ri-customer-service-2-line text-lg"></i>
<span class="text-xs mt-1">ìƒë‹´ì‹ ì²­</span>
</button>
<button class="flex flex-col items-center justify-center py-2 w-full" onclick="showProgressDialog()">
<i class="ri-search-line text-lg"></i>
<span class="text-xs mt-1">ì§„í–‰í™•ì¸</span>
</button>
</div>
</footer>

<!-- ì§„í–‰ ìƒí™© í™•ì¸ ëª¨ë‹¬ -->
<div id="progressModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white w-[320px] rounded-lg p-6">
        <h3 class="text-lg font-medium mb-4">ì§„í–‰ ìƒí™© í™•ì¸</h3>
        <form id="progressCheckForm" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">í•¸ë“œí° ë²ˆí˜¸</label>
                <input type="text" id="phoneNumber" placeholder="ìˆ«ìë§Œ ì…ë ¥ (01012345678)" 
                    class="mt-1 w-full px-4 py-2 border rounded" required
                    maxlength="11"
                    oninput="this.value = this.value.replace(/[^0-9]/g, ''); validatePhoneNumber(this);">
                <p class="text-xs text-gray-500 mt-1">'-' ì—†ì´ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                <p id="phoneError" class="text-xs text-red-500 mt-1 hidden">í•¸ë“œí° ë²ˆí˜¸ 11ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
            </div>
            <button type="submit" class="w-full py-3 bg-primary hover:bg-primary/90 text-white !rounded-button">
                í™•ì¸í•˜ê¸°
            </button>
        </form>
        <button class="w-full py-2 mt-2 text-gray-500" onclick="closeProgressModal()">
            ë‹«ê¸°
        </button>
    </div>
</div>

<!-- ì§„í–‰ ìƒí™© ìƒì„¸ ëª¨ë‹¬ -->
<div id="progressDetailModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white w-[90%] max-w-[480px] rounded-lg max-h-[90vh] flex flex-col">
        <div class="p-4 border-b flex justify-between items-center">
            <h3 class="text-lg font-medium">ì‹ ì²­ ì§„í–‰ ìƒí™©</h3>
            <button onclick="closeProgressDetailModal()" class="text-gray-500">
                <i class="ri-close-line text-xl"></i>
            </button>
        </div>
        <div class="overflow-y-auto flex-1 p-6">
            <div id="progressDetail" class="space-y-4">
                <!-- ì§„í–‰ ìƒí™© ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
            </div>
        </div>
    </div>
</div>


<script>
// ì§„í–‰ ìƒí™© í™•ì¸ ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜
function showProgressDialog() {
    document.getElementById('progressModal').classList.remove('hidden');
}

function closeProgressModal() {
    document.getElementById('progressModal').classList.add('hidden');
}

function closeProgressDetailModal() {
    document.getElementById('progressDetailModal').classList.add('hidden');
}

// ì§„í–‰ ìƒí™© í™•ì¸ ì²˜ë¦¬
document.getElementById('progressCheckForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const phone = document.getElementById('phoneNumber').value;
    
    try {
        // ë¬¸ì˜ ì¡°íšŒ
        const snapshot = await db.collection('franchise_inquiries')
            .where('phone', '==', phone)
            .get();

        if (snapshot.empty) {
            alert('í•´ë‹¹ ë²ˆí˜¸ë¡œ ì‹ ì²­ëœ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        // í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì •ë ¬
        const docs = snapshot.docs.sort((a, b) => 
            b.data().createdAt.toDate() - a.data().createdAt.toDate()
        );
        const data = docs[0].data();

        // ë©”ì‹œì§€ ë‚´ì—­ ì¡°íšŒ - ìˆ˜ì •ëœ ë¶€ë¶„
        let messagesHtml = '';
        try {
            const messagesSnapshot = await db.collection('inquiry_messages')
                .where('inquiryId', '==', docs[0].id)
                .orderBy('createdAt', 'desc')
                .get()
                .catch(async (error) => {
                    if (error.code === 'failed-precondition') {
                        // ì¸ë±ìŠ¤ê°€ ì—†ëŠ” ê²½ìš° ë©”ì‹œì§€ë§Œ ì¡°íšŒ
                        const simpleMessagesSnapshot = await db.collection('inquiry_messages')
                            .where('inquiryId', '==', docs[0].id)
                            .get();
                        return simpleMessagesSnapshot;
                    }
                    throw error;
                });

            if (!messagesSnapshot.empty) {
                const messages = messagesSnapshot.docs.sort((a, b) => 
                    b.data().createdAt.toDate() - a.data().createdAt.toDate()
                );
                
                messages.forEach(messageDoc => {
                    const messageData = messageDoc.data();
                    messagesHtml += `
                        <div class="bg-gray-50 rounded-lg p-4 mb-3">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-sm font-medium">ë‹´ë‹¹ì: ${messageData.adminId}</span>
                                <span class="text-xs text-gray-500">
                                    ${new Date(messageData.createdAt.toDate()).toLocaleString()}
                                </span>
                            </div>
                            <div class="prose prose-sm max-w-none">
                                ${messageData.content}
                            </div>
                        </div>
                    `;
                });
            } else {
                messagesHtml = '<p class="text-sm text-gray-500 text-center">ì•„ì§ ìƒë‹´ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        } catch (error) {
            console.error('ë©”ì‹œì§€ ì¡°íšŒ ì‹¤íŒ¨:', error);
            messagesHtml = '<p class="text-sm text-red-500 text-center">ë©”ì‹œì§€ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
        }

        // ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
        const statusTexts = {
            'pending': 'ì ‘ìˆ˜ì™„ë£Œ',
            'checking': 'í™•ì¸ì¤‘',
            'consulting': 'ìƒë‹´ì¤‘',
            'completed': 'ìƒë‹´ì™„ë£Œ',
            'canceled': 'ì·¨ì†Œ'
        };

        const progressDetail = document.getElementById('progressDetail');
        progressDetail.innerHTML = `
            <div class="space-y-6">
                <!-- ì§„í–‰ ë‹¨ê³„ í‘œì‹œ -->
                <div class="flex justify-between items-center relative mb-2">
                    <div class="absolute left-0 right-0 top-1/2 h-1 bg-gray-200 -z-10"></div>
                    <div class="flex flex-col items-center">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center ${data.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-500'}">
                            ğŸ“
                        </div>
                        <span class="text-xs mt-1">ì ‘ìˆ˜ì™„ë£Œ</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center ${data.status === 'checking' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-500'}">
                            ğŸ”
                        </div>
                        <span class="text-xs mt-1">í™•ì¸ì¤‘</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center ${data.status === 'consulting' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-500'}">
                            ğŸ’¬
                        </div>
                        <span class="text-xs mt-1">ìƒë‹´ì¤‘</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center ${data.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-500'}">
                            âœ¨
                        </div>
                        <span class="text-xs mt-1">ìƒë‹´ì™„ë£Œ</span>
                    </div>
                </div>

                <!-- í˜„ì¬ ìƒíƒœ í‘œì‹œ -->
                <div class="bg-gray-50 p-3 rounded-lg text-center">
                    <p class="text-sm text-gray-600">í˜„ì¬ ì§„í–‰ ìƒíƒœ</p>
                    <div class="mt-2">
                        <span class="px-3 py-1.5 text-sm font-medium rounded-full inline-flex items-center gap-1.5 ${getStatusColor(data.status)}">
                            ${data.status === 'pending' ? 'ğŸ“' : 
                              data.status === 'checking' ? 'ğŸ”' : 
                              data.status === 'consulting' ? 'ğŸ’¬' : 
                              data.status === 'completed' ? 'âœ¨' : 'âŒ'}
                            ${statusTexts[data.status] || data.status}
                        </span>
                    </div>
                </div>

                <!-- ì‹ ì²­ ì •ë³´ -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">ì‹ ì²­ìëª…</label>
                        <p class="mt-1 flex items-center gap-2">
                            <span class="text-lg">ğŸ‘¤</span>
                            ${data.name}
                        </p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">ì—°ë½ì²˜</label>
                        <p class="mt-1 flex items-center gap-2">
                            <span class="text-lg">ğŸ“±</span>
                            ${data.phone.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3')}
                        </p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">í¬ë§ì§€ì—­</label>
                        <p class="mt-1 flex items-center gap-2">
                            <span class="text-lg">ğŸ“</span>
                            ${data.location}
                        </p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">íŒŒíŠ¸ë„ˆ ìœ í˜•</label>
                        <p class="mt-1 flex items-center gap-2">
                            <span class="text-lg">ğŸ¤</span>
                            ${data.partnerType}
                        </p>
                    </div>
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700">ì‹ ì²­ì¼ì‹œ</label>
                        <p class="mt-1 flex items-center gap-2">
                            <span class="text-lg">ğŸ“…</span>
                            ${new Date(data.createdAt.toDate()).toLocaleString()}
                        </p>
                    </div>
                </div>

                <!-- ìƒë‹´ ë©”ì‹œì§€ í‘œì‹œ -->
                <div class="mt-6">
                    <h4 class="text-sm font-medium text-gray-700 mb-3">ìƒë‹´ ë‚´ì—­</h4>
                    <div id="messageHistory" class="space-y-4">
                        ${messagesHtml}
                    </div>
                </div>

                <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
                <div class="mt-4 text-center space-y-4">
                    <p class="text-sm text-gray-600">
                        ì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì€ ê³ ê°ì„¼í„°(dev.chanwoo@gmail.com)ë¡œ ì—°ë½ì£¼ì„¸ìš”
                    </p>
                    ${data.status !== 'canceled' ? `
                    <div class="border-t pt-4">
                        <div class="flex gap-2 justify-center">
                            <button onclick="cancelInquiry('${docs[0].id}')" 
                                    class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm">
                                ìƒë‹´ ì·¨ì†Œ
                            </button>
                            <button onclick="closeProgressDetailModal()" 
                                    class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm">
                                ë‹«ê¸°
                            </button>
                        </div>
                    </div>
                    ` : ''}
                </div>
            </div>
        `;

        // ì§„í–‰ ìƒí™© ëª¨ë‹¬ ì „í™˜
        document.getElementById('progressModal').classList.add('hidden');
        document.getElementById('progressDetailModal').classList.remove('hidden');
    } catch (error) {
        console.error('ì§„í–‰ ìƒí™© ì¡°íšŒ ì‹¤íŒ¨:', error);
        alert('ì§„í–‰ ìƒí™©ì„ ì¡°íšŒí•˜ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    }
});

// ì‹ ì²­ ì·¨ì†Œ ì²˜ë¦¬ í•¨ìˆ˜ ì¶”ê°€
async function cancelInquiry(docId) {
    if (!confirm('ìƒë‹´ ì‹ ì²­ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì·¨ì†Œ í›„ì—ëŠ” ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        return;
    }

    try {
        await db.collection('franchise_inquiries').doc(docId).update({
            status: 'canceled',
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        // í™œë™ ë¡œê·¸ ê¸°ë¡
        await utils.logActivity('cancel_inquiry', {
            inquiryId: docId,
            action: 'user_canceled'
        });

        alert('ìƒë‹´ ì‹ ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        closeProgressDetailModal();
    } catch (error) {
        console.error('ì‹ ì²­ ì·¨ì†Œ ì‹¤íŒ¨:', error);
        alert('ì‹ ì²­ ì·¨ì†Œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê³ ê°ì„¼í„°ë¡œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.');
    }
}

function getStatusColor(status) {
    const colors = {
        'pending': 'bg-yellow-100 text-yellow-800',
        'checking': 'bg-blue-100 text-blue-800',
        'consulting': 'bg-blue-100 text-blue-800',
        'completed': 'bg-green-100 text-green-800',
        'canceled': 'bg-red-100 text-red-800'
    };
    return colors[status] || 'bg-gray-100 text-gray-800';
}

function validatePhoneNumber(input) {
    const errorElement = document.getElementById('phoneError');
    if (input.value.length !== 11) {
        errorElement.classList.remove('hidden');
        input.setCustomValidity('í•¸ë“œí° ë²ˆí˜¸ 11ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
    } else {
        errorElement.classList.add('hidden');
        input.setCustomValidity('');
    }
}
</script>
</body>
</html>